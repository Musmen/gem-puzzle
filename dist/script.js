!function(n){var t={};function e(l){if(t[l])return t[l].exports;var c=t[l]={i:l,l:!1,exports:{}};return n[l].call(c.exports,c,c.exports,e),c.l=!0,c.exports}e.m=n,e.c=t,e.d=function(n,t,l){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:l})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var l=Object.create(null);if(e.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var c in n)e.d(l,c,function(t){return n[t]}.bind(null,c));return l},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)}([function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3Njc3Mvc3R5bGUuc2Nzcz9mNjlmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./scss/style.scss\nvar style = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./js/renderHTML.js\nconst renderer = () => {\n  document.body.innerHTML = `\n    <div class=\"centralizer\">\n    <header class=\"header\">\n      <nav class=\"navigation\">\n        <ul class=\"navigation__list list\">\n          <li class=\"navigation__item\">\n            <button id=\"startButton\" class=\"navigation__button button\">\n              размешать и начать\n            </button>\n          </li>\n          <li class=\"navigation__item\">\n            <button id=\"timeButton\" class=\"navigation__button button\">\n              стоп\n            </button>\n          </li>\n          <li class=\"navigation__item\">\n            <button id=\"saveButton\" class=\"navigation__button button\">\n              сохранить\n            </button>\n          </li>\n          <li class=\"navigation__item\">\n            <button id=\"resultsButton\" class=\"navigation__button button\">\n              результаты\n            </button>\n          </li>\n        </ul>\n      </nav>\n    </header>\n\n    <main class=\"main\">\n      <div class=\"game\">\n        <div class=\"game__description\">\n          <p class=\"game__paragraph\">Ходов: <span class=\"game__turn\">0</span></p>\n          <p class=\"game__paragraph\">\n            Время:\n            <span class=\"game__time\">\n              <span id=\"minutes\" class=\"time__minutes\">00</span> :\n              <span id=\"seconds\" class=\"time__seconds\">00</span>\n            </span>\n          </p>\n        </div>\n\n        <div class=\"size\">\n          <p class=\"size__description\">\n            Размер поля: <span id=\"sizeOutput\" class=\"size__output\">4x4</span>\n          </p>\n          <p>\n            <label for=\"sizeSelect\">Выбрать: </label>\n            <select id=\"sizeSelect\" class=\"size__select\">\n              <option value=\"9\">3x3</option>\n              <option value=\"16\" selected>4x4</option>\n              <option value=\"25\">5x5</option>\n              <option value=\"36\">6x6</option>\n              <option value=\"49\">7x7</option>\n              <option value=\"64\">8x8</option>\n            </select>\n          </p>\n        </div>\n\n        <div id=\"gameField\" class=\"game__field field-size_4x4\">\n        </div>\n      </div>\n    </main>\n\n    <footer class=\"footer\">\n      <div class=\"footer__contacts\">\n        by @Musmen. RSSchool 2020 Q1\n      </div>\n    </footer>\n  </div>\n\n  <template id=\"popup__template\">\n    <div class=\"popup__layout\" tabindex=\"0\">\n      <div class=\"popup__wrapper\">\n        <button class=\"popup__close-button\">X</button>\n        <p class=\"popup__description\"></p>\n        <p class=\"popup__message\"></p>\n      </div>\n    </div>\n  </template>`;\n};\n\n/* harmony default export */ var renderHTML = (renderer);\n\n// CONCATENATED MODULE: ./js/helper.js\nconst DEFAULT = {\n  FIELD_SIZE: 16,\n};\n\nconst DEBOUNCING_COORDINATE_DELTA = 10; // px\n\nconst EMPTY_ELEMENT_VALUE = 'x';\n\nconst THROTTLING_DELAY = 10; // ms\n\nconst ANIMATION_DELAY = 200; // ms\n\nconst ONE_SECOND = 1000; // ms\n\nconst TIME_BUTTON_TEXT = {\n  STOP: 'стоп',\n  RESUME: 'продолжить',\n};\n\nconst RESULTS_TABLE_TITLE = 'таблица рекордов';\n\n// CONCATENATED MODULE: ./js/utils.js\n\n\nfunction initField(fieldSize) {\n  const field = new Array(fieldSize).fill(EMPTY_ELEMENT_VALUE);\n  return field.map((item, index) => {\n    if (index === fieldSize - 1) return item;\n    return `${index + 1}`;\n  });\n}\n\nfunction shuffleField(array) {\n  const result = array.slice();\n\n  for (let i = array.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n\n  return result;\n}\n\nfunction generateField(size) {\n  const baseField = initField(size);\n  return shuffleField(baseField);\n}\n\nfunction renderField(container, fieldArray) {\n  const gameField = document.createDocumentFragment();\n\n  fieldArray.forEach((item) => {\n    const fieldCell = document.createElement('div');\n    fieldCell.classList.add('field__cell');\n    if (item === EMPTY_ELEMENT_VALUE) fieldCell.classList.add('field__cell_empty');\n    fieldCell.innerText = item;\n    gameField.append(fieldCell);\n  });\n\n  container.append(gameField);\n}\n\nfunction clearFieldElement(container) {\n  const gameField = container;\n\n  gameField.innerHTML = '';\n}\n\nfunction changeFieldClass(container, cells) {\n  const gameField = container;\n  const size = Math.sqrt(cells);\n\n  gameField.className = `game__field field-size_${size}x${size}`;\n}\n\nfunction getNeighbors(fieldArray, size) {\n  const xIndex = fieldArray.indexOf(EMPTY_ELEMENT_VALUE);\n  const neighbors = {\n    top: xIndex - Math.sqrt(size),\n    right: xIndex + 1,\n    bottom: xIndex + Math.sqrt(size),\n    left: xIndex - 1,\n  };\n\n  return Object.values(neighbors);\n}\n\nfunction isNeighbor(fieldArray, size, targetCell) {\n  return getNeighbors(fieldArray, size).includes(fieldArray.indexOf(targetCell.innerText));\n}\n\nfunction moveAt(element, newX, newY, shiftX, shiftY) {\n  const movedElement = element;\n\n  movedElement.style.left = `${newX - shiftX}px`;\n  movedElement.style.top = `${newY - shiftY}px`;\n}\n\nfunction throttle(callback, interval) {\n  let enableCall = true;\n\n  return function applyThrottle(...args) {\n    if (!enableCall) return;\n\n    enableCall = false;\n    callback.apply(this, args);\n    setTimeout(() => { enableCall = true; }, interval);\n  };\n}\n\nconst disableDocumentScroll = (className = 'overflow-hidden') => {\n  document.body.classList.add(className);\n};\n\nconst enableDocumentScroll = (className = 'overflow-hidden') => {\n  document.body.classList.remove(className);\n};\n\nconst disableTab = (event) => {\n  if (event.key === 'Tab') event.preventDefault();\n};\n\nconst generateWinnerMessage = (minutes, seconds, turns) => `Ура! Вы решили головоломку\\n за ${minutes} : ${seconds} и ${turns} ходов`;\n\n// CONCATENATED MODULE: ./js/popup.js\n\n\nclass popup_Popup {\n  constructor(container = null, mainClass = 'popup', onCloseCallback) {\n    this.container = container;\n    this.mainClass = mainClass;\n    this.onCloseCallback = onCloseCallback;\n\n    this.close = this.close.bind(this);\n  }\n\n  onOpenPopupHandler(popup) {\n    popup.addEventListener('keydown', disableTab.bind(this));\n  }\n\n  onClosePopupHandler(popup) {\n    popup.removeEventListener('keydown', disableTab.bind(this));\n  }\n\n  build(content) {\n    const { mainClass } = this;\n    const { description, message } = content;\n\n    const popup = document.querySelector('#popup__template').content.cloneNode(true);\n    const layout = popup.querySelector('.popup__layout');\n\n    layout.classList.add(mainClass);\n    if (description) popup.querySelector('.popup__description').innerText = description;\n    if (message) popup.querySelector('.popup__message').innerText = message;\n\n    layout.addEventListener('click', this.close);\n\n    return popup;\n  }\n\n  open(content) {\n    const { container } = this;\n    const popup = this.build(content);\n\n    container.append(popup);\n\n    const popupLayout = container.querySelector('.popup__layout');\n    popupLayout.focus();\n    this.onOpenPopupHandler(popupLayout);\n    disableDocumentScroll();\n  }\n\n  close(event) {\n    const { target } = event;\n    const { container } = this;\n    const popup = container.querySelector('.popup__layout');\n    const closePopupButton = popup.querySelector('.popup__close-button');\n    if (target !== closePopupButton) return;\n\n    if (this.onCloseCallback) this.onCloseCallback();\n    this.onClosePopupHandler(popup);\n    popup.remove();\n    enableDocumentScroll();\n  }\n}\n\n// CONCATENATED MODULE: ./js/game.js\n\n\n\n\n\n\nclass game_Game {\n  constructor() {\n    this.field = [];\n    this.size = null;\n    this.turn = null;\n    this.time = {\n      game: 0,\n      start: null,\n      now: null,\n    };\n    this.clockID = null;\n    this.results = [];\n\n    this.targetCell = null;\n    this.belowElement = null;\n    this.cloneCell = null;\n    this.coordinates = null;\n\n    this.isDropAble = false;\n    this.isDragging = false;\n    this.isAnimation = false;\n    this.isPaused = false;\n\n    this.sizeOutputElement = null;\n    this.turnOutputElement = null;\n    this.timeOutput = {\n      seconds: null,\n      minutes: null,\n    };\n    this.fieldElement = null;\n    this.timeButton = null;\n    this.sizeSelect = null;\n  }\n\n  setTurn(value) {\n    this.turn = value;\n    this.renderTurn();\n  }\n\n  getTurn() {\n    return this.turn;\n  }\n\n  renderTurn() {\n    this.turnOutputElement.innerText = this.getTurn();\n  }\n\n  renderTime() {\n    this.time.now = new Date();\n\n    const gameTime = new Date(this.time.now - this.time.start + this.time.game);\n    const minutes = `0${gameTime.getMinutes()}`.slice(-2);\n    const seconds = `0${gameTime.getSeconds()}`.slice(-2);\n\n    this.timeOutput.seconds.innerText = seconds;\n    this.timeOutput.minutes.innerText = minutes;\n  }\n\n  startClock() {\n    this.isPaused = false;\n    if (this.clockID) clearInterval(this.clockID);\n\n    this.time.start = new Date();\n    this.renderTime();\n\n    this.clockID = setInterval(() => {\n      this.renderTime();\n    }, ONE_SECOND);\n  }\n\n  pauseClock() {\n    if (this.clockID) clearInterval(this.clockID);\n    if (!this.isPaused) this.time.game = this.time.now - this.time.start + this.time.game;\n    this.isPaused = true;\n  }\n\n  clearClock() {\n    this.time = {\n      game: 0,\n      start: 0,\n      now: 0,\n    };\n  }\n\n  timeButtonHandler(event) {\n    const button = this.timeButton;\n\n    if (button.innerText.toLowerCase() === TIME_BUTTON_TEXT.STOP && event) {\n      button.innerText = TIME_BUTTON_TEXT.RESUME;\n      this.pauseClock();\n      return;\n    }\n\n    button.innerText = TIME_BUTTON_TEXT.STOP;\n    this.startClock();\n  }\n\n  renderSizeOutput(cells) {\n    const size = Math.sqrt(cells);\n    this.sizeOutputElement.innerText = `${size}x${size}`;\n  }\n\n  setFieldSize(size) {\n    this.size = size;\n  }\n\n  setSize(size) {\n    this.setFieldSize(size);\n    this.renderSizeOutput(size);\n  }\n\n  changeFieldSize(newSize) {\n    this.setSize(newSize);\n  }\n\n  sizeChangeHandler(event) {\n    const { target } = event;\n    const newSize = +target.value;\n    this.newGame(newSize);\n  }\n\n  setSizeSelector() {\n    this.sizeSelect.querySelectorAll('option')\n      .forEach((item) => {\n        const option = item;\n        if (+option.value === this.size) {\n          option.selected = true;\n        } else option.selected = false;\n      });\n  }\n\n  startButtonHandler() {\n    this.newGame();\n  }\n\n  newGame(newSize = this.size) {\n    this.changeFieldSize(newSize);\n    this.field = generateField(newSize);\n    changeFieldClass(this.fieldElement, newSize);\n    clearFieldElement(this.fieldElement);\n    renderField(this.fieldElement, this.field);\n    this.setTurn(0);\n    this.clearClock();\n    this.timeButtonHandler();\n    this.isWinner();\n  }\n\n  isWinner() {\n    for (let i = 1; i < this.size; i += 1) {\n      if (+this.field[i - 1] !== i) return;\n    }\n\n    this.pauseClock();\n    const popup = new popup_Popup(document.body, 'popup', this.newGame.bind(this));\n\n    const { timeOutput, sizeOutputElement, turn } = this;\n    this.results.push({\n      size: sizeOutputElement.innerText,\n      turn,\n    });\n\n    const minutes = timeOutput.minutes.innerText;\n    const seconds = timeOutput.seconds.innerText;\n    const description = generateWinnerMessage(minutes, seconds, turn);\n\n    popup.open({ description });\n  }\n\n  resultsButtonHandler() {\n    this.pauseClock();\n    const popup = new popup_Popup(document.body, 'popup', () => {\n      this.timeButtonHandler();\n    });\n\n    const description = RESULTS_TABLE_TITLE.toUpperCase();\n    let message = '';\n    this.results\n      .sort((a, b) => +a.turn - +b.turn)\n      .forEach((item, index) => {\n        if (index < 10) message += `${index + 1}. ХОДЫ: ${item.turn} (РАЗМЕР: ${item.size})\\n`;\n      });\n\n    popup.open({ description, message });\n  }\n\n  saveGame() {\n    if (!this.isPaused) {\n      this.pauseClock();\n      this.startClock();\n    }\n\n    const game = {\n      field: this.field,\n      size: this.size,\n      turn: this.turn,\n      time: this.time,\n      results: this.results,\n    };\n\n    localStorage.setItem('savedGame', JSON.stringify(game));\n  }\n\n  loadGame() {\n    const game = JSON.parse(localStorage.getItem('savedGame'));\n    if (!game) return false;\n\n    this.field = game.field;\n    this.size = game.size;\n    this.turn = game.turn;\n    this.time = game.time;\n    this.results = game.results;\n    return true;\n  }\n\n  saveButtonHandler() {\n    this.saveGame();\n  }\n\n  continueGame() {\n    this.setSizeSelector();\n\n    this.changeFieldSize(this.size);\n    changeFieldClass(this.fieldElement, this.size);\n    clearFieldElement(this.fieldElement);\n    renderField(this.fieldElement, this.field);\n    this.setTurn(this.turn);\n    this.startClock();\n  }\n\n  swapCells(firstValue, secondValue) {\n    const { field } = this;\n\n    const firstIndex = field.indexOf(firstValue);\n    const secondIndex = field.indexOf(secondValue);\n    [field[firstIndex], field[secondIndex]] = [field[secondIndex], field[firstIndex]];\n  }\n\n  animatedSwapCells(firstElement, secondElement) {\n    const animatedElement = secondElement;\n\n    this.isAnimation = true;\n    animatedElement.classList.add('animated');\n    animatedElement.style.top = `${firstElement.offsetTop}px`;\n    animatedElement.style.left = `${firstElement.offsetLeft}px`;\n\n    setTimeout(() => {\n      this.isAnimation = false;\n      animatedElement.classList.remove('animated');\n      this.isDropAble = false;\n      this.isDragging = false;\n      this.cloneCell.remove();\n      this.cloneCell = null;\n\n      const firstValue = firstElement.innerText;\n      const secondValue = secondElement.innerText;\n      this.swapCells(firstValue, secondValue);\n      this.isWinner();\n      clearFieldElement(this.fieldElement);\n      renderField(this.fieldElement, this.field);\n    }, ANIMATION_DELAY);\n  }\n\n  onCloneCellMouseMoveHandler(evt) {\n    const {\n      startX, startY,\n      shiftX, shiftY,\n    } = this.coordinates;\n\n    if (!this.isDragging) {\n      const moveX = evt.pageX;\n      const moveY = evt.pageY;\n      const deltaX = Math.abs(moveX - startX);\n      const deltaY = Math.abs(moveY - startY);\n      if (deltaX < DEBOUNCING_COORDINATE_DELTA\n        && deltaY < DEBOUNCING_COORDINATE_DELTA) return;\n      this.isDragging = true;\n    }\n\n    moveAt(this.cloneCell, evt.pageX, evt.pageY, shiftX, shiftY);\n\n    this.cloneCell.classList.add('hidden');\n    const belowElement = document.elementFromPoint(evt.clientX, evt.clientY);\n    this.cloneCell.classList.remove('hidden');\n\n    const dropAbleBelow = belowElement && belowElement.closest('.field__cell_empty');\n\n    if (dropAbleBelow) {\n      this.belowElement = dropAbleBelow;\n      this.belowElement.classList.add('shadow');\n      this.isDropAble = true;\n    } else {\n      if (this.belowElement) this.belowElement.classList.remove('shadow');\n      this.isDropAble = false;\n      this.belowElement = null;\n    }\n  }\n\n  onCloneCellMouseUpHandler() {\n    document.removeEventListener('mousemove', this.onCloneCellMouseMoveHandler);\n    document.removeEventListener('mouseup', this.onCloneCellMouseUpHandler);\n\n    const emptyElement = document.body.querySelector('.field__cell_empty');\n\n    if (!this.isDropAble && this.isDragging) {\n      this.targetCell.classList.remove('hidden');\n      this.cloneCell.remove();\n      this.cloneCell = null;\n      this.isDragging = false;\n      return;\n    }\n\n    this.animatedSwapCells(emptyElement, this.cloneCell);\n    this.setTurn(this.turn + 1);\n  }\n\n  onFieldMouseDownHandler(event) {\n    if (!isNeighbor(this.field, this.size, event.target) || this.isAnimation) return;\n    if (!this.clockID) this.startClock();\n    if (this.isPaused) this.timeButtonHandler();\n\n    this.targetCell = event.target;\n    this.targetCell.ondragstart = () => false;\n\n    this.belowElement = null;\n\n    this.coordinates = {\n      startX: event.pageX,\n      startY: event.pageY,\n      shiftX: event.clientX - this.targetCell.getBoundingClientRect().left,\n      shiftY: event.clientY - this.targetCell.getBoundingClientRect().top,\n    };\n\n    const clone = this.targetCell.cloneNode(true);\n    this.targetCell.classList.add('hidden');\n    clone.classList.add('moveable', `cell-size_${Math.sqrt(this.size)}x${Math.sqrt(this.size)}`);\n    document.body.append(clone);\n    this.cloneCell = document.body.querySelector('.moveable');\n    moveAt(\n      this.cloneCell,\n      this.coordinates.startX,\n      this.coordinates.startY,\n      this.coordinates.shiftX,\n      this.coordinates.shiftY,\n    );\n\n    document.addEventListener('mousemove', this.onCloneCellMouseMoveHandler);\n    document.addEventListener('mouseup', this.onCloneCellMouseUpHandler);\n  }\n\n  init() {\n    this.fieldElement = document.querySelector('#gameField');\n    this.sizeOutputElement = document.querySelector('.size__output');\n    this.turnOutputElement = document.querySelector('.game__turn');\n    this.timeOutput.seconds = document.querySelector('.time__seconds');\n    this.timeOutput.minutes = document.querySelector('.time__minutes');\n    this.timeButton = document.querySelector('#timeButton');\n    this.sizeSelect = document.querySelector('#sizeSelect');\n    const isLoaded = this.loadGame();\n\n    if (isLoaded) {\n      this.continueGame();\n    } else this.newGame(DEFAULT.FIELD_SIZE);\n\n    this.sizeSelect.addEventListener('change', this.sizeChangeHandler.bind(this));\n\n    const startButton = document.querySelector('#startButton');\n    startButton.addEventListener('click', this.startButtonHandler.bind(this));\n\n    const resultsButton = document.querySelector('#resultsButton');\n    resultsButton.addEventListener('click', this.resultsButtonHandler.bind(this));\n\n    const saveButton = document.querySelector('#saveButton');\n    saveButton.addEventListener('click', this.saveButtonHandler.bind(this));\n\n    this.timeButton.addEventListener('click', this.timeButtonHandler.bind(this));\n\n    this.onFieldMouseDownHandler = this.onFieldMouseDownHandler.bind(this);\n    this.onCloneCellMouseMoveHandler = throttle(this.onCloneCellMouseMoveHandler,\n      THROTTLING_DELAY).bind(this);\n    this.onCloneCellMouseUpHandler = this.onCloneCellMouseUpHandler.bind(this);\n\n    this.fieldElement.addEventListener('mousedown', this.onFieldMouseDownHandler);\n  }\n}\n\n// CONCATENATED MODULE: ./js/script.js\n\n\n\n\n\nwindow.onload = () => {\n  renderHTML();\n  const game = new game_Game();\n  game.init();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2pzL3JlbmRlckhUTUwuanM/ZTFlNCIsIndlYnBhY2s6Ly8vLi9qcy9oZWxwZXIuanM/Y2JlZSIsIndlYnBhY2s6Ly8vLi9qcy91dGlscy5qcz82ODYwIiwid2VicGFjazovLy8uL2pzL3BvcHVwLmpzP2MzNmQiLCJ3ZWJwYWNrOi8vLy4vanMvZ2FtZS5qcz9lNjU3Iiwid2VicGFjazovLy8uL2pzL3NjcmlwdC5qcz84YzJmIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlbmRlcmVyID0gKCkgPT4ge1xuICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9IGBcbiAgICA8ZGl2IGNsYXNzPVwiY2VudHJhbGl6ZXJcIj5cbiAgICA8aGVhZGVyIGNsYXNzPVwiaGVhZGVyXCI+XG4gICAgICA8bmF2IGNsYXNzPVwibmF2aWdhdGlvblwiPlxuICAgICAgICA8dWwgY2xhc3M9XCJuYXZpZ2F0aW9uX19saXN0IGxpc3RcIj5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJuYXZpZ2F0aW9uX19pdGVtXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwic3RhcnRCdXR0b25cIiBjbGFzcz1cIm5hdmlnYXRpb25fX2J1dHRvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAg0YDQsNC30LzQtdGI0LDRgtGMINC4INC90LDRh9Cw0YLRjFxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJuYXZpZ2F0aW9uX19pdGVtXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwidGltZUJ1dHRvblwiIGNsYXNzPVwibmF2aWdhdGlvbl9fYnV0dG9uIGJ1dHRvblwiPlxuICAgICAgICAgICAgICDRgdGC0L7Qv1xuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgICA8bGkgY2xhc3M9XCJuYXZpZ2F0aW9uX19pdGVtXCI+XG4gICAgICAgICAgICA8YnV0dG9uIGlkPVwic2F2ZUJ1dHRvblwiIGNsYXNzPVwibmF2aWdhdGlvbl9fYnV0dG9uIGJ1dHRvblwiPlxuICAgICAgICAgICAgICDRgdC+0YXRgNCw0L3QuNGC0YxcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgICAgPGxpIGNsYXNzPVwibmF2aWdhdGlvbl9faXRlbVwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInJlc3VsdHNCdXR0b25cIiBjbGFzcz1cIm5hdmlnYXRpb25fX2J1dHRvbiBidXR0b25cIj5cbiAgICAgICAgICAgICAg0YDQtdC30YPQu9GM0YLQsNGC0YtcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgIDwvbGk+XG4gICAgICAgIDwvdWw+XG4gICAgICA8L25hdj5cbiAgICA8L2hlYWRlcj5cblxuICAgIDxtYWluIGNsYXNzPVwibWFpblwiPlxuICAgICAgPGRpdiBjbGFzcz1cImdhbWVcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImdhbWVfX2Rlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJnYW1lX19wYXJhZ3JhcGhcIj7QpdC+0LTQvtCyOiA8c3BhbiBjbGFzcz1cImdhbWVfX3R1cm5cIj4wPC9zcGFuPjwvcD5cbiAgICAgICAgICA8cCBjbGFzcz1cImdhbWVfX3BhcmFncmFwaFwiPlxuICAgICAgICAgICAg0JLRgNC10LzRjzpcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZ2FtZV9fdGltZVwiPlxuICAgICAgICAgICAgICA8c3BhbiBpZD1cIm1pbnV0ZXNcIiBjbGFzcz1cInRpbWVfX21pbnV0ZXNcIj4wMDwvc3Bhbj4gOlxuICAgICAgICAgICAgICA8c3BhbiBpZD1cInNlY29uZHNcIiBjbGFzcz1cInRpbWVfX3NlY29uZHNcIj4wMDwvc3Bhbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJzaXplXCI+XG4gICAgICAgICAgPHAgY2xhc3M9XCJzaXplX19kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAg0KDQsNC30LzQtdGAINC/0L7Qu9GPOiA8c3BhbiBpZD1cInNpemVPdXRwdXRcIiBjbGFzcz1cInNpemVfX291dHB1dFwiPjR4NDwvc3Bhbj5cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPHA+XG4gICAgICAgICAgICA8bGFiZWwgZm9yPVwic2l6ZVNlbGVjdFwiPtCS0YvQsdGA0LDRgtGMOiA8L2xhYmVsPlxuICAgICAgICAgICAgPHNlbGVjdCBpZD1cInNpemVTZWxlY3RcIiBjbGFzcz1cInNpemVfX3NlbGVjdFwiPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiOVwiPjN4Mzwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMTZcIiBzZWxlY3RlZD40eDQ8L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjI1XCI+NXg1PC9vcHRpb24+XG4gICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIzNlwiPjZ4Njwvb3B0aW9uPlxuICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiNDlcIj43eDc8L29wdGlvbj5cbiAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjY0XCI+OHg4PC9vcHRpb24+XG4gICAgICAgICAgICA8L3NlbGVjdD5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgaWQ9XCJnYW1lRmllbGRcIiBjbGFzcz1cImdhbWVfX2ZpZWxkIGZpZWxkLXNpemVfNHg0XCI+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9tYWluPlxuXG4gICAgPGZvb3RlciBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImZvb3Rlcl9fY29udGFjdHNcIj5cbiAgICAgICAgYnkgQE11c21lbi4gUlNTY2hvb2wgMjAyMCBRMVxuICAgICAgPC9kaXY+XG4gICAgPC9mb290ZXI+XG4gIDwvZGl2PlxuXG4gIDx0ZW1wbGF0ZSBpZD1cInBvcHVwX190ZW1wbGF0ZVwiPlxuICAgIDxkaXYgY2xhc3M9XCJwb3B1cF9fbGF5b3V0XCIgdGFiaW5kZXg9XCIwXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwicG9wdXBfX3dyYXBwZXJcIj5cbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cInBvcHVwX19jbG9zZS1idXR0b25cIj5YPC9idXR0b24+XG4gICAgICAgIDxwIGNsYXNzPVwicG9wdXBfX2Rlc2NyaXB0aW9uXCI+PC9wPlxuICAgICAgICA8cCBjbGFzcz1cInBvcHVwX19tZXNzYWdlXCI+PC9wPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvdGVtcGxhdGU+YDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlbmRlcmVyO1xuIiwiZXhwb3J0IGNvbnN0IERFRkFVTFQgPSB7XG4gIEZJRUxEX1NJWkU6IDE2LFxufTtcblxuZXhwb3J0IGNvbnN0IERFQk9VTkNJTkdfQ09PUkRJTkFURV9ERUxUQSA9IDEwOyAvLyBweFxuXG5leHBvcnQgY29uc3QgRU1QVFlfRUxFTUVOVF9WQUxVRSA9ICd4JztcblxuZXhwb3J0IGNvbnN0IFRIUk9UVExJTkdfREVMQVkgPSAxMDsgLy8gbXNcblxuZXhwb3J0IGNvbnN0IEFOSU1BVElPTl9ERUxBWSA9IDIwMDsgLy8gbXNcblxuZXhwb3J0IGNvbnN0IE9ORV9TRUNPTkQgPSAxMDAwOyAvLyBtc1xuXG5leHBvcnQgY29uc3QgVElNRV9CVVRUT05fVEVYVCA9IHtcbiAgU1RPUDogJ9GB0YLQvtC/JyxcbiAgUkVTVU1FOiAn0L/RgNC+0LTQvtC70LbQuNGC0YwnLFxufTtcblxuZXhwb3J0IGNvbnN0IFJFU1VMVFNfVEFCTEVfVElUTEUgPSAn0YLQsNCx0LvQuNGG0LAg0YDQtdC60L7RgNC00L7Qsic7XG4iLCJpbXBvcnQgeyBFTVBUWV9FTEVNRU5UX1ZBTFVFIH0gZnJvbSAnLi9oZWxwZXInO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdEZpZWxkKGZpZWxkU2l6ZSkge1xuICBjb25zdCBmaWVsZCA9IG5ldyBBcnJheShmaWVsZFNpemUpLmZpbGwoRU1QVFlfRUxFTUVOVF9WQUxVRSk7XG4gIHJldHVybiBmaWVsZC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGluZGV4ID09PSBmaWVsZFNpemUgLSAxKSByZXR1cm4gaXRlbTtcbiAgICByZXR1cm4gYCR7aW5kZXggKyAxfWA7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2h1ZmZsZUZpZWxkKGFycmF5KSB7XG4gIGNvbnN0IHJlc3VsdCA9IGFycmF5LnNsaWNlKCk7XG5cbiAgZm9yIChsZXQgaSA9IGFycmF5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpIC09IDEpIHtcbiAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgW3Jlc3VsdFtpXSwgcmVzdWx0W2pdXSA9IFtyZXN1bHRbal0sIHJlc3VsdFtpXV07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVGaWVsZChzaXplKSB7XG4gIGNvbnN0IGJhc2VGaWVsZCA9IGluaXRGaWVsZChzaXplKTtcbiAgcmV0dXJuIHNodWZmbGVGaWVsZChiYXNlRmllbGQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyRmllbGQoY29udGFpbmVyLCBmaWVsZEFycmF5KSB7XG4gIGNvbnN0IGdhbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICBmaWVsZEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCBmaWVsZENlbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaWVsZENlbGwuY2xhc3NMaXN0LmFkZCgnZmllbGRfX2NlbGwnKTtcbiAgICBpZiAoaXRlbSA9PT0gRU1QVFlfRUxFTUVOVF9WQUxVRSkgZmllbGRDZWxsLmNsYXNzTGlzdC5hZGQoJ2ZpZWxkX19jZWxsX2VtcHR5Jyk7XG4gICAgZmllbGRDZWxsLmlubmVyVGV4dCA9IGl0ZW07XG4gICAgZ2FtZUZpZWxkLmFwcGVuZChmaWVsZENlbGwpO1xuICB9KTtcblxuICBjb250YWluZXIuYXBwZW5kKGdhbWVGaWVsZCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckZpZWxkRWxlbWVudChjb250YWluZXIpIHtcbiAgY29uc3QgZ2FtZUZpZWxkID0gY29udGFpbmVyO1xuXG4gIGdhbWVGaWVsZC5pbm5lckhUTUwgPSAnJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoYW5nZUZpZWxkQ2xhc3MoY29udGFpbmVyLCBjZWxscykge1xuICBjb25zdCBnYW1lRmllbGQgPSBjb250YWluZXI7XG4gIGNvbnN0IHNpemUgPSBNYXRoLnNxcnQoY2VsbHMpO1xuXG4gIGdhbWVGaWVsZC5jbGFzc05hbWUgPSBgZ2FtZV9fZmllbGQgZmllbGQtc2l6ZV8ke3NpemV9eCR7c2l6ZX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0TmVpZ2hib3JzKGZpZWxkQXJyYXksIHNpemUpIHtcbiAgY29uc3QgeEluZGV4ID0gZmllbGRBcnJheS5pbmRleE9mKEVNUFRZX0VMRU1FTlRfVkFMVUUpO1xuICBjb25zdCBuZWlnaGJvcnMgPSB7XG4gICAgdG9wOiB4SW5kZXggLSBNYXRoLnNxcnQoc2l6ZSksXG4gICAgcmlnaHQ6IHhJbmRleCArIDEsXG4gICAgYm90dG9tOiB4SW5kZXggKyBNYXRoLnNxcnQoc2l6ZSksXG4gICAgbGVmdDogeEluZGV4IC0gMSxcbiAgfTtcblxuICByZXR1cm4gT2JqZWN0LnZhbHVlcyhuZWlnaGJvcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOZWlnaGJvcihmaWVsZEFycmF5LCBzaXplLCB0YXJnZXRDZWxsKSB7XG4gIHJldHVybiBnZXROZWlnaGJvcnMoZmllbGRBcnJheSwgc2l6ZSkuaW5jbHVkZXMoZmllbGRBcnJheS5pbmRleE9mKHRhcmdldENlbGwuaW5uZXJUZXh0KSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3ZlQXQoZWxlbWVudCwgbmV3WCwgbmV3WSwgc2hpZnRYLCBzaGlmdFkpIHtcbiAgY29uc3QgbW92ZWRFbGVtZW50ID0gZWxlbWVudDtcblxuICBtb3ZlZEVsZW1lbnQuc3R5bGUubGVmdCA9IGAke25ld1ggLSBzaGlmdFh9cHhgO1xuICBtb3ZlZEVsZW1lbnQuc3R5bGUudG9wID0gYCR7bmV3WSAtIHNoaWZ0WX1weGA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvdHRsZShjYWxsYmFjaywgaW50ZXJ2YWwpIHtcbiAgbGV0IGVuYWJsZUNhbGwgPSB0cnVlO1xuXG4gIHJldHVybiBmdW5jdGlvbiBhcHBseVRocm90dGxlKC4uLmFyZ3MpIHtcbiAgICBpZiAoIWVuYWJsZUNhbGwpIHJldHVybjtcblxuICAgIGVuYWJsZUNhbGwgPSBmYWxzZTtcbiAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgZW5hYmxlQ2FsbCA9IHRydWU7IH0sIGludGVydmFsKTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGRpc2FibGVEb2N1bWVudFNjcm9sbCA9IChjbGFzc05hbWUgPSAnb3ZlcmZsb3ctaGlkZGVuJykgPT4ge1xuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVEb2N1bWVudFNjcm9sbCA9IChjbGFzc05hbWUgPSAnb3ZlcmZsb3ctaGlkZGVuJykgPT4ge1xuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkaXNhYmxlVGFiID0gKGV2ZW50KSA9PiB7XG4gIGlmIChldmVudC5rZXkgPT09ICdUYWInKSBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdlbmVyYXRlV2lubmVyTWVzc2FnZSA9IChtaW51dGVzLCBzZWNvbmRzLCB0dXJucykgPT4gYNCj0YDQsCEg0JLRiyDRgNC10YjQuNC70Lgg0LPQvtC70L7QstC+0LvQvtC80LrRg1xcbiDQt9CwICR7bWludXRlc30gOiAke3NlY29uZHN9INC4ICR7dHVybnN9INGF0L7QtNC+0LJgO1xuIiwiaW1wb3J0IHsgZGlzYWJsZURvY3VtZW50U2Nyb2xsLCBlbmFibGVEb2N1bWVudFNjcm9sbCwgZGlzYWJsZVRhYiB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciA9IG51bGwsIG1haW5DbGFzcyA9ICdwb3B1cCcsIG9uQ2xvc2VDYWxsYmFjaykge1xuICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMubWFpbkNsYXNzID0gbWFpbkNsYXNzO1xuICAgIHRoaXMub25DbG9zZUNhbGxiYWNrID0gb25DbG9zZUNhbGxiYWNrO1xuXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9uT3BlblBvcHVwSGFuZGxlcihwb3B1cCkge1xuICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBkaXNhYmxlVGFiLmJpbmQodGhpcykpO1xuICB9XG5cbiAgb25DbG9zZVBvcHVwSGFuZGxlcihwb3B1cCkge1xuICAgIHBvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBkaXNhYmxlVGFiLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYnVpbGQoY29udGVudCkge1xuICAgIGNvbnN0IHsgbWFpbkNsYXNzIH0gPSB0aGlzO1xuICAgIGNvbnN0IHsgZGVzY3JpcHRpb24sIG1lc3NhZ2UgfSA9IGNvbnRlbnQ7XG5cbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fdGVtcGxhdGUnKS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgICBjb25zdCBsYXlvdXQgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xheW91dCcpO1xuXG4gICAgbGF5b3V0LmNsYXNzTGlzdC5hZGQobWFpbkNsYXNzKTtcbiAgICBpZiAoZGVzY3JpcHRpb24pIHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZGVzY3JpcHRpb24nKS5pbm5lclRleHQgPSBkZXNjcmlwdGlvbjtcbiAgICBpZiAobWVzc2FnZSkgcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19tZXNzYWdlJykuaW5uZXJUZXh0ID0gbWVzc2FnZTtcblxuICAgIGxheW91dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuY2xvc2UpO1xuXG4gICAgcmV0dXJuIHBvcHVwO1xuICB9XG5cbiAgb3Blbihjb250ZW50KSB7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgcG9wdXAgPSB0aGlzLmJ1aWxkKGNvbnRlbnQpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZChwb3B1cCk7XG5cbiAgICBjb25zdCBwb3B1cExheW91dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2xheW91dCcpO1xuICAgIHBvcHVwTGF5b3V0LmZvY3VzKCk7XG4gICAgdGhpcy5vbk9wZW5Qb3B1cEhhbmRsZXIocG9wdXBMYXlvdXQpO1xuICAgIGRpc2FibGVEb2N1bWVudFNjcm9sbCgpO1xuICB9XG5cbiAgY2xvc2UoZXZlbnQpIHtcbiAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XG4gICAgY29uc3QgeyBjb250YWluZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgcG9wdXAgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnBvcHVwX19sYXlvdXQnKTtcbiAgICBjb25zdCBjbG9zZVBvcHVwQnV0dG9uID0gcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbiAgICBpZiAodGFyZ2V0ICE9PSBjbG9zZVBvcHVwQnV0dG9uKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5vbkNsb3NlQ2FsbGJhY2spIHRoaXMub25DbG9zZUNhbGxiYWNrKCk7XG4gICAgdGhpcy5vbkNsb3NlUG9wdXBIYW5kbGVyKHBvcHVwKTtcbiAgICBwb3B1cC5yZW1vdmUoKTtcbiAgICBlbmFibGVEb2N1bWVudFNjcm9sbCgpO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBERUZBVUxULFxuICBERUJPVU5DSU5HX0NPT1JESU5BVEVfREVMVEEsXG4gIFRIUk9UVExJTkdfREVMQVksXG4gIEFOSU1BVElPTl9ERUxBWSxcbiAgT05FX1NFQ09ORCxcbiAgVElNRV9CVVRUT05fVEVYVCxcbiAgUkVTVUxUU19UQUJMRV9USVRMRSxcbn0gZnJvbSAnLi9oZWxwZXInO1xuXG5pbXBvcnQge1xuICBnZW5lcmF0ZUZpZWxkLFxuICByZW5kZXJGaWVsZCxcbiAgY2xlYXJGaWVsZEVsZW1lbnQsXG4gIGNoYW5nZUZpZWxkQ2xhc3MsXG4gIGlzTmVpZ2hib3IsXG4gIG1vdmVBdCxcbiAgdGhyb3R0bGUsXG4gIGdlbmVyYXRlV2lubmVyTWVzc2FnZSxcbn0gZnJvbSAnLi91dGlscyc7XG5cbmltcG9ydCBQb3B1cCBmcm9tICcuL3BvcHVwJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZmllbGQgPSBbXTtcbiAgICB0aGlzLnNpemUgPSBudWxsO1xuICAgIHRoaXMudHVybiA9IG51bGw7XG4gICAgdGhpcy50aW1lID0ge1xuICAgICAgZ2FtZTogMCxcbiAgICAgIHN0YXJ0OiBudWxsLFxuICAgICAgbm93OiBudWxsLFxuICAgIH07XG4gICAgdGhpcy5jbG9ja0lEID0gbnVsbDtcbiAgICB0aGlzLnJlc3VsdHMgPSBbXTtcblxuICAgIHRoaXMudGFyZ2V0Q2VsbCA9IG51bGw7XG4gICAgdGhpcy5iZWxvd0VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuY2xvbmVDZWxsID0gbnVsbDtcbiAgICB0aGlzLmNvb3JkaW5hdGVzID0gbnVsbDtcblxuICAgIHRoaXMuaXNEcm9wQWJsZSA9IGZhbHNlO1xuICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIHRoaXMuaXNBbmltYXRpb24gPSBmYWxzZTtcbiAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLnNpemVPdXRwdXRFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnR1cm5PdXRwdXRFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnRpbWVPdXRwdXQgPSB7XG4gICAgICBzZWNvbmRzOiBudWxsLFxuICAgICAgbWludXRlczogbnVsbCxcbiAgICB9O1xuICAgIHRoaXMuZmllbGRFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLnRpbWVCdXR0b24gPSBudWxsO1xuICAgIHRoaXMuc2l6ZVNlbGVjdCA9IG51bGw7XG4gIH1cblxuICBzZXRUdXJuKHZhbHVlKSB7XG4gICAgdGhpcy50dXJuID0gdmFsdWU7XG4gICAgdGhpcy5yZW5kZXJUdXJuKCk7XG4gIH1cblxuICBnZXRUdXJuKCkge1xuICAgIHJldHVybiB0aGlzLnR1cm47XG4gIH1cblxuICByZW5kZXJUdXJuKCkge1xuICAgIHRoaXMudHVybk91dHB1dEVsZW1lbnQuaW5uZXJUZXh0ID0gdGhpcy5nZXRUdXJuKCk7XG4gIH1cblxuICByZW5kZXJUaW1lKCkge1xuICAgIHRoaXMudGltZS5ub3cgPSBuZXcgRGF0ZSgpO1xuXG4gICAgY29uc3QgZ2FtZVRpbWUgPSBuZXcgRGF0ZSh0aGlzLnRpbWUubm93IC0gdGhpcy50aW1lLnN0YXJ0ICsgdGhpcy50aW1lLmdhbWUpO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBgMCR7Z2FtZVRpbWUuZ2V0TWludXRlcygpfWAuc2xpY2UoLTIpO1xuICAgIGNvbnN0IHNlY29uZHMgPSBgMCR7Z2FtZVRpbWUuZ2V0U2Vjb25kcygpfWAuc2xpY2UoLTIpO1xuXG4gICAgdGhpcy50aW1lT3V0cHV0LnNlY29uZHMuaW5uZXJUZXh0ID0gc2Vjb25kcztcbiAgICB0aGlzLnRpbWVPdXRwdXQubWludXRlcy5pbm5lclRleHQgPSBtaW51dGVzO1xuICB9XG5cbiAgc3RhcnRDbG9jaygpIHtcbiAgICB0aGlzLmlzUGF1c2VkID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuY2xvY2tJRCkgY2xlYXJJbnRlcnZhbCh0aGlzLmNsb2NrSUQpO1xuXG4gICAgdGhpcy50aW1lLnN0YXJ0ID0gbmV3IERhdGUoKTtcbiAgICB0aGlzLnJlbmRlclRpbWUoKTtcblxuICAgIHRoaXMuY2xvY2tJRCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMucmVuZGVyVGltZSgpO1xuICAgIH0sIE9ORV9TRUNPTkQpO1xuICB9XG5cbiAgcGF1c2VDbG9jaygpIHtcbiAgICBpZiAodGhpcy5jbG9ja0lEKSBjbGVhckludGVydmFsKHRoaXMuY2xvY2tJRCk7XG4gICAgaWYgKCF0aGlzLmlzUGF1c2VkKSB0aGlzLnRpbWUuZ2FtZSA9IHRoaXMudGltZS5ub3cgLSB0aGlzLnRpbWUuc3RhcnQgKyB0aGlzLnRpbWUuZ2FtZTtcbiAgICB0aGlzLmlzUGF1c2VkID0gdHJ1ZTtcbiAgfVxuXG4gIGNsZWFyQ2xvY2soKSB7XG4gICAgdGhpcy50aW1lID0ge1xuICAgICAgZ2FtZTogMCxcbiAgICAgIHN0YXJ0OiAwLFxuICAgICAgbm93OiAwLFxuICAgIH07XG4gIH1cblxuICB0aW1lQnV0dG9uSGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMudGltZUJ1dHRvbjtcblxuICAgIGlmIChidXR0b24uaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkgPT09IFRJTUVfQlVUVE9OX1RFWFQuU1RPUCAmJiBldmVudCkge1xuICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IFRJTUVfQlVUVE9OX1RFWFQuUkVTVU1FO1xuICAgICAgdGhpcy5wYXVzZUNsb2NrKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IFRJTUVfQlVUVE9OX1RFWFQuU1RPUDtcbiAgICB0aGlzLnN0YXJ0Q2xvY2soKTtcbiAgfVxuXG4gIHJlbmRlclNpemVPdXRwdXQoY2VsbHMpIHtcbiAgICBjb25zdCBzaXplID0gTWF0aC5zcXJ0KGNlbGxzKTtcbiAgICB0aGlzLnNpemVPdXRwdXRFbGVtZW50LmlubmVyVGV4dCA9IGAke3NpemV9eCR7c2l6ZX1gO1xuICB9XG5cbiAgc2V0RmllbGRTaXplKHNpemUpIHtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICB9XG5cbiAgc2V0U2l6ZShzaXplKSB7XG4gICAgdGhpcy5zZXRGaWVsZFNpemUoc2l6ZSk7XG4gICAgdGhpcy5yZW5kZXJTaXplT3V0cHV0KHNpemUpO1xuICB9XG5cbiAgY2hhbmdlRmllbGRTaXplKG5ld1NpemUpIHtcbiAgICB0aGlzLnNldFNpemUobmV3U2l6ZSk7XG4gIH1cblxuICBzaXplQ2hhbmdlSGFuZGxlcihldmVudCkge1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBldmVudDtcbiAgICBjb25zdCBuZXdTaXplID0gK3RhcmdldC52YWx1ZTtcbiAgICB0aGlzLm5ld0dhbWUobmV3U2l6ZSk7XG4gIH1cblxuICBzZXRTaXplU2VsZWN0b3IoKSB7XG4gICAgdGhpcy5zaXplU2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpXG4gICAgICAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICBjb25zdCBvcHRpb24gPSBpdGVtO1xuICAgICAgICBpZiAoK29wdGlvbi52YWx1ZSA9PT0gdGhpcy5zaXplKSB7XG4gICAgICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIG9wdGlvbi5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gIH1cblxuICBzdGFydEJ1dHRvbkhhbmRsZXIoKSB7XG4gICAgdGhpcy5uZXdHYW1lKCk7XG4gIH1cblxuICBuZXdHYW1lKG5ld1NpemUgPSB0aGlzLnNpemUpIHtcbiAgICB0aGlzLmNoYW5nZUZpZWxkU2l6ZShuZXdTaXplKTtcbiAgICB0aGlzLmZpZWxkID0gZ2VuZXJhdGVGaWVsZChuZXdTaXplKTtcbiAgICBjaGFuZ2VGaWVsZENsYXNzKHRoaXMuZmllbGRFbGVtZW50LCBuZXdTaXplKTtcbiAgICBjbGVhckZpZWxkRWxlbWVudCh0aGlzLmZpZWxkRWxlbWVudCk7XG4gICAgcmVuZGVyRmllbGQodGhpcy5maWVsZEVsZW1lbnQsIHRoaXMuZmllbGQpO1xuICAgIHRoaXMuc2V0VHVybigwKTtcbiAgICB0aGlzLmNsZWFyQ2xvY2soKTtcbiAgICB0aGlzLnRpbWVCdXR0b25IYW5kbGVyKCk7XG4gICAgdGhpcy5pc1dpbm5lcigpO1xuICB9XG5cbiAgaXNXaW5uZXIoKSB7XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnNpemU7IGkgKz0gMSkge1xuICAgICAgaWYgKCt0aGlzLmZpZWxkW2kgLSAxXSAhPT0gaSkgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGF1c2VDbG9jaygpO1xuICAgIGNvbnN0IHBvcHVwID0gbmV3IFBvcHVwKGRvY3VtZW50LmJvZHksICdwb3B1cCcsIHRoaXMubmV3R2FtZS5iaW5kKHRoaXMpKTtcblxuICAgIGNvbnN0IHsgdGltZU91dHB1dCwgc2l6ZU91dHB1dEVsZW1lbnQsIHR1cm4gfSA9IHRoaXM7XG4gICAgdGhpcy5yZXN1bHRzLnB1c2goe1xuICAgICAgc2l6ZTogc2l6ZU91dHB1dEVsZW1lbnQuaW5uZXJUZXh0LFxuICAgICAgdHVybixcbiAgICB9KTtcblxuICAgIGNvbnN0IG1pbnV0ZXMgPSB0aW1lT3V0cHV0Lm1pbnV0ZXMuaW5uZXJUZXh0O1xuICAgIGNvbnN0IHNlY29uZHMgPSB0aW1lT3V0cHV0LnNlY29uZHMuaW5uZXJUZXh0O1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZ2VuZXJhdGVXaW5uZXJNZXNzYWdlKG1pbnV0ZXMsIHNlY29uZHMsIHR1cm4pO1xuXG4gICAgcG9wdXAub3Blbih7IGRlc2NyaXB0aW9uIH0pO1xuICB9XG5cbiAgcmVzdWx0c0J1dHRvbkhhbmRsZXIoKSB7XG4gICAgdGhpcy5wYXVzZUNsb2NrKCk7XG4gICAgY29uc3QgcG9wdXAgPSBuZXcgUG9wdXAoZG9jdW1lbnQuYm9keSwgJ3BvcHVwJywgKCkgPT4ge1xuICAgICAgdGhpcy50aW1lQnV0dG9uSGFuZGxlcigpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBSRVNVTFRTX1RBQkxFX1RJVExFLnRvVXBwZXJDYXNlKCk7XG4gICAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgICB0aGlzLnJlc3VsdHNcbiAgICAgIC5zb3J0KChhLCBiKSA9PiArYS50dXJuIC0gK2IudHVybilcbiAgICAgIC5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoaW5kZXggPCAxMCkgbWVzc2FnZSArPSBgJHtpbmRleCArIDF9LiDQpdCe0JTQqzogJHtpdGVtLnR1cm59ICjQoNCQ0JfQnNCV0KA6ICR7aXRlbS5zaXplfSlcXG5gO1xuICAgICAgfSk7XG5cbiAgICBwb3B1cC5vcGVuKHsgZGVzY3JpcHRpb24sIG1lc3NhZ2UgfSk7XG4gIH1cblxuICBzYXZlR2FtZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNQYXVzZWQpIHtcbiAgICAgIHRoaXMucGF1c2VDbG9jaygpO1xuICAgICAgdGhpcy5zdGFydENsb2NrKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZSA9IHtcbiAgICAgIGZpZWxkOiB0aGlzLmZpZWxkLFxuICAgICAgc2l6ZTogdGhpcy5zaXplLFxuICAgICAgdHVybjogdGhpcy50dXJuLFxuICAgICAgdGltZTogdGhpcy50aW1lLFxuICAgICAgcmVzdWx0czogdGhpcy5yZXN1bHRzLFxuICAgIH07XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2F2ZWRHYW1lJywgSlNPTi5zdHJpbmdpZnkoZ2FtZSkpO1xuICB9XG5cbiAgbG9hZEdhbWUoKSB7XG4gICAgY29uc3QgZ2FtZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NhdmVkR2FtZScpKTtcbiAgICBpZiAoIWdhbWUpIHJldHVybiBmYWxzZTtcblxuICAgIHRoaXMuZmllbGQgPSBnYW1lLmZpZWxkO1xuICAgIHRoaXMuc2l6ZSA9IGdhbWUuc2l6ZTtcbiAgICB0aGlzLnR1cm4gPSBnYW1lLnR1cm47XG4gICAgdGhpcy50aW1lID0gZ2FtZS50aW1lO1xuICAgIHRoaXMucmVzdWx0cyA9IGdhbWUucmVzdWx0cztcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHNhdmVCdXR0b25IYW5kbGVyKCkge1xuICAgIHRoaXMuc2F2ZUdhbWUoKTtcbiAgfVxuXG4gIGNvbnRpbnVlR2FtZSgpIHtcbiAgICB0aGlzLnNldFNpemVTZWxlY3RvcigpO1xuXG4gICAgdGhpcy5jaGFuZ2VGaWVsZFNpemUodGhpcy5zaXplKTtcbiAgICBjaGFuZ2VGaWVsZENsYXNzKHRoaXMuZmllbGRFbGVtZW50LCB0aGlzLnNpemUpO1xuICAgIGNsZWFyRmllbGRFbGVtZW50KHRoaXMuZmllbGRFbGVtZW50KTtcbiAgICByZW5kZXJGaWVsZCh0aGlzLmZpZWxkRWxlbWVudCwgdGhpcy5maWVsZCk7XG4gICAgdGhpcy5zZXRUdXJuKHRoaXMudHVybik7XG4gICAgdGhpcy5zdGFydENsb2NrKCk7XG4gIH1cblxuICBzd2FwQ2VsbHMoZmlyc3RWYWx1ZSwgc2Vjb25kVmFsdWUpIHtcbiAgICBjb25zdCB7IGZpZWxkIH0gPSB0aGlzO1xuXG4gICAgY29uc3QgZmlyc3RJbmRleCA9IGZpZWxkLmluZGV4T2YoZmlyc3RWYWx1ZSk7XG4gICAgY29uc3Qgc2Vjb25kSW5kZXggPSBmaWVsZC5pbmRleE9mKHNlY29uZFZhbHVlKTtcbiAgICBbZmllbGRbZmlyc3RJbmRleF0sIGZpZWxkW3NlY29uZEluZGV4XV0gPSBbZmllbGRbc2Vjb25kSW5kZXhdLCBmaWVsZFtmaXJzdEluZGV4XV07XG4gIH1cblxuICBhbmltYXRlZFN3YXBDZWxscyhmaXJzdEVsZW1lbnQsIHNlY29uZEVsZW1lbnQpIHtcbiAgICBjb25zdCBhbmltYXRlZEVsZW1lbnQgPSBzZWNvbmRFbGVtZW50O1xuXG4gICAgdGhpcy5pc0FuaW1hdGlvbiA9IHRydWU7XG4gICAgYW5pbWF0ZWRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGVkJyk7XG4gICAgYW5pbWF0ZWRFbGVtZW50LnN0eWxlLnRvcCA9IGAke2ZpcnN0RWxlbWVudC5vZmZzZXRUb3B9cHhgO1xuICAgIGFuaW1hdGVkRWxlbWVudC5zdHlsZS5sZWZ0ID0gYCR7Zmlyc3RFbGVtZW50Lm9mZnNldExlZnR9cHhgO1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmlzQW5pbWF0aW9uID0gZmFsc2U7XG4gICAgICBhbmltYXRlZEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0ZWQnKTtcbiAgICAgIHRoaXMuaXNEcm9wQWJsZSA9IGZhbHNlO1xuICAgICAgdGhpcy5pc0RyYWdnaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLmNsb25lQ2VsbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuY2xvbmVDZWxsID0gbnVsbDtcblxuICAgICAgY29uc3QgZmlyc3RWYWx1ZSA9IGZpcnN0RWxlbWVudC5pbm5lclRleHQ7XG4gICAgICBjb25zdCBzZWNvbmRWYWx1ZSA9IHNlY29uZEVsZW1lbnQuaW5uZXJUZXh0O1xuICAgICAgdGhpcy5zd2FwQ2VsbHMoZmlyc3RWYWx1ZSwgc2Vjb25kVmFsdWUpO1xuICAgICAgdGhpcy5pc1dpbm5lcigpO1xuICAgICAgY2xlYXJGaWVsZEVsZW1lbnQodGhpcy5maWVsZEVsZW1lbnQpO1xuICAgICAgcmVuZGVyRmllbGQodGhpcy5maWVsZEVsZW1lbnQsIHRoaXMuZmllbGQpO1xuICAgIH0sIEFOSU1BVElPTl9ERUxBWSk7XG4gIH1cblxuICBvbkNsb25lQ2VsbE1vdXNlTW92ZUhhbmRsZXIoZXZ0KSB7XG4gICAgY29uc3Qge1xuICAgICAgc3RhcnRYLCBzdGFydFksXG4gICAgICBzaGlmdFgsIHNoaWZ0WSxcbiAgICB9ID0gdGhpcy5jb29yZGluYXRlcztcblxuICAgIGlmICghdGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICBjb25zdCBtb3ZlWCA9IGV2dC5wYWdlWDtcbiAgICAgIGNvbnN0IG1vdmVZID0gZXZ0LnBhZ2VZO1xuICAgICAgY29uc3QgZGVsdGFYID0gTWF0aC5hYnMobW92ZVggLSBzdGFydFgpO1xuICAgICAgY29uc3QgZGVsdGFZID0gTWF0aC5hYnMobW92ZVkgLSBzdGFydFkpO1xuICAgICAgaWYgKGRlbHRhWCA8IERFQk9VTkNJTkdfQ09PUkRJTkFURV9ERUxUQVxuICAgICAgICAmJiBkZWx0YVkgPCBERUJPVU5DSU5HX0NPT1JESU5BVEVfREVMVEEpIHJldHVybjtcbiAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgfVxuXG4gICAgbW92ZUF0KHRoaXMuY2xvbmVDZWxsLCBldnQucGFnZVgsIGV2dC5wYWdlWSwgc2hpZnRYLCBzaGlmdFkpO1xuXG4gICAgdGhpcy5jbG9uZUNlbGwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgY29uc3QgYmVsb3dFbGVtZW50ID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludChldnQuY2xpZW50WCwgZXZ0LmNsaWVudFkpO1xuICAgIHRoaXMuY2xvbmVDZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuXG4gICAgY29uc3QgZHJvcEFibGVCZWxvdyA9IGJlbG93RWxlbWVudCAmJiBiZWxvd0VsZW1lbnQuY2xvc2VzdCgnLmZpZWxkX19jZWxsX2VtcHR5Jyk7XG5cbiAgICBpZiAoZHJvcEFibGVCZWxvdykge1xuICAgICAgdGhpcy5iZWxvd0VsZW1lbnQgPSBkcm9wQWJsZUJlbG93O1xuICAgICAgdGhpcy5iZWxvd0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2hhZG93Jyk7XG4gICAgICB0aGlzLmlzRHJvcEFibGUgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5iZWxvd0VsZW1lbnQpIHRoaXMuYmVsb3dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3NoYWRvdycpO1xuICAgICAgdGhpcy5pc0Ryb3BBYmxlID0gZmFsc2U7XG4gICAgICB0aGlzLmJlbG93RWxlbWVudCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgb25DbG9uZUNlbGxNb3VzZVVwSGFuZGxlcigpIHtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm9uQ2xvbmVDZWxsTW91c2VNb3ZlSGFuZGxlcik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMub25DbG9uZUNlbGxNb3VzZVVwSGFuZGxlcik7XG5cbiAgICBjb25zdCBlbXB0eUVsZW1lbnQgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5maWVsZF9fY2VsbF9lbXB0eScpO1xuXG4gICAgaWYgKCF0aGlzLmlzRHJvcEFibGUgJiYgdGhpcy5pc0RyYWdnaW5nKSB7XG4gICAgICB0aGlzLnRhcmdldENlbGwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICB0aGlzLmNsb25lQ2VsbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuY2xvbmVDZWxsID0gbnVsbDtcbiAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYW5pbWF0ZWRTd2FwQ2VsbHMoZW1wdHlFbGVtZW50LCB0aGlzLmNsb25lQ2VsbCk7XG4gICAgdGhpcy5zZXRUdXJuKHRoaXMudHVybiArIDEpO1xuICB9XG5cbiAgb25GaWVsZE1vdXNlRG93bkhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZiAoIWlzTmVpZ2hib3IodGhpcy5maWVsZCwgdGhpcy5zaXplLCBldmVudC50YXJnZXQpIHx8IHRoaXMuaXNBbmltYXRpb24pIHJldHVybjtcbiAgICBpZiAoIXRoaXMuY2xvY2tJRCkgdGhpcy5zdGFydENsb2NrKCk7XG4gICAgaWYgKHRoaXMuaXNQYXVzZWQpIHRoaXMudGltZUJ1dHRvbkhhbmRsZXIoKTtcblxuICAgIHRoaXMudGFyZ2V0Q2VsbCA9IGV2ZW50LnRhcmdldDtcbiAgICB0aGlzLnRhcmdldENlbGwub25kcmFnc3RhcnQgPSAoKSA9PiBmYWxzZTtcblxuICAgIHRoaXMuYmVsb3dFbGVtZW50ID0gbnVsbDtcblxuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSB7XG4gICAgICBzdGFydFg6IGV2ZW50LnBhZ2VYLFxuICAgICAgc3RhcnRZOiBldmVudC5wYWdlWSxcbiAgICAgIHNoaWZ0WDogZXZlbnQuY2xpZW50WCAtIHRoaXMudGFyZ2V0Q2VsbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LFxuICAgICAgc2hpZnRZOiBldmVudC5jbGllbnRZIC0gdGhpcy50YXJnZXRDZWxsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCxcbiAgICB9O1xuXG4gICAgY29uc3QgY2xvbmUgPSB0aGlzLnRhcmdldENlbGwuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMudGFyZ2V0Q2VsbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBjbG9uZS5jbGFzc0xpc3QuYWRkKCdtb3ZlYWJsZScsIGBjZWxsLXNpemVfJHtNYXRoLnNxcnQodGhpcy5zaXplKX14JHtNYXRoLnNxcnQodGhpcy5zaXplKX1gKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZChjbG9uZSk7XG4gICAgdGhpcy5jbG9uZUNlbGwgPSBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5tb3ZlYWJsZScpO1xuICAgIG1vdmVBdChcbiAgICAgIHRoaXMuY2xvbmVDZWxsLFxuICAgICAgdGhpcy5jb29yZGluYXRlcy5zdGFydFgsXG4gICAgICB0aGlzLmNvb3JkaW5hdGVzLnN0YXJ0WSxcbiAgICAgIHRoaXMuY29vcmRpbmF0ZXMuc2hpZnRYLFxuICAgICAgdGhpcy5jb29yZGluYXRlcy5zaGlmdFksXG4gICAgKTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMub25DbG9uZUNlbGxNb3VzZU1vdmVIYW5kbGVyKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5vbkNsb25lQ2VsbE1vdXNlVXBIYW5kbGVyKTtcbiAgfVxuXG4gIGluaXQoKSB7XG4gICAgdGhpcy5maWVsZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZ2FtZUZpZWxkJyk7XG4gICAgdGhpcy5zaXplT3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXplX19vdXRwdXQnKTtcbiAgICB0aGlzLnR1cm5PdXRwdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbWVfX3R1cm4nKTtcbiAgICB0aGlzLnRpbWVPdXRwdXQuc2Vjb25kcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lX19zZWNvbmRzJyk7XG4gICAgdGhpcy50aW1lT3V0cHV0Lm1pbnV0ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGltZV9fbWludXRlcycpO1xuICAgIHRoaXMudGltZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lQnV0dG9uJyk7XG4gICAgdGhpcy5zaXplU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpemVTZWxlY3QnKTtcbiAgICBjb25zdCBpc0xvYWRlZCA9IHRoaXMubG9hZEdhbWUoKTtcblxuICAgIGlmIChpc0xvYWRlZCkge1xuICAgICAgdGhpcy5jb250aW51ZUdhbWUoKTtcbiAgICB9IGVsc2UgdGhpcy5uZXdHYW1lKERFRkFVTFQuRklFTERfU0laRSk7XG5cbiAgICB0aGlzLnNpemVTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5zaXplQ2hhbmdlSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIGNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YXJ0QnV0dG9uJyk7XG4gICAgc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnN0YXJ0QnV0dG9uSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgIGNvbnN0IHJlc3VsdHNCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVzdWx0c0J1dHRvbicpO1xuICAgIHJlc3VsdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnJlc3VsdHNCdXR0b25IYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlQnV0dG9uJyk7XG4gICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuc2F2ZUJ1dHRvbkhhbmRsZXIuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLnRpbWVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRpbWVCdXR0b25IYW5kbGVyLmJpbmQodGhpcykpO1xuXG4gICAgdGhpcy5vbkZpZWxkTW91c2VEb3duSGFuZGxlciA9IHRoaXMub25GaWVsZE1vdXNlRG93bkhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvbmVDZWxsTW91c2VNb3ZlSGFuZGxlciA9IHRocm90dGxlKHRoaXMub25DbG9uZUNlbGxNb3VzZU1vdmVIYW5kbGVyLFxuICAgICAgVEhST1RUTElOR19ERUxBWSkuYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvbmVDZWxsTW91c2VVcEhhbmRsZXIgPSB0aGlzLm9uQ2xvbmVDZWxsTW91c2VVcEhhbmRsZXIuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuZmllbGRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMub25GaWVsZE1vdXNlRG93bkhhbmRsZXIpO1xuICB9XG59XG4iLCJpbXBvcnQgJy4uL3Njc3Mvc3R5bGUuc2Nzcyc7XG5cbmltcG9ydCByZW5kZXJIVE1MIGZyb20gJy4vcmVuZGVySFRNTCc7XG5pbXBvcnQgR2FtZSBmcm9tICcuL2dhbWUnO1xuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICByZW5kZXJIVE1MKCk7XG4gIGNvbnN0IGdhbWUgPSBuZXcgR2FtZSgpO1xuICBnYW1lLmluaXQoKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ25GQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDbkRBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdFpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")}]);